<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Market Rates (GitHub-only)</title>
<style>
  body {
    font-family: sans-serif;
    text-align: center;
    background: #f9fafb;
    padding: 40px;
  }
  .box {
    background: #fff;
    padding: 20px;
    margin: 15px auto;
    width: 320px;
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }
  .label {
    font-weight: bold;
  }
  .value {
    color: #007bff;
    font-size: 1.3em;
    margin-top: 6px;
  }
  footer {
    margin-top: 25px;
    color: gray;
    font-size: 0.8em;
  }
</style>
</head>
<body>
<h1>üìä Market Rates</h1>

<div class="box">
  <div class="label">üí∂ 1 Euro =</div>
  <div id="eurinr" class="value">‚Ä¶</div>
</div>
<div class="box">
  <div class="label">ü™ô Gold (10 g INR)</div>
  <div id="gold" class="value">‚Ä¶</div>
</div>
<div class="box">
  <div class="label">ü•à Silver (1 kg INR)</div>
  <div id="silver" class="value">‚Ä¶</div>
</div>
<div class="box">
  <div class="label">üìà GIB (USD)</div>
  <div id="gib" class="value">‚Ä¶</div>
</div>

<footer>Euro auto-updates ¬∑ others from data.json</footer>

<script>
async function loadData() {
  try {
    // 1Ô∏è‚É£ Fetch Euro ‚Üí INR from open.er-api.com (CORS-friendly)
    let eurRate = null;
    try {
      const fx = await fetch("https://open.er-api.com/v6/latest/EUR");
      if (!fx.ok) throw new Error("Failed to fetch Euro rates");
      const fxData = await fx.json();
      if (fxData?.rates?.INR != null) {
        eurRate = fxData.rates.INR;
        document.getElementById("eurinr").textContent = eurRate.toFixed(2) + " ‚Çπ";
      } else {
        throw new Error("INR rate missing");
      }
    } catch(e) {
      console.warn("Euro API failed, using fallback:", e);
      document.getElementById("eurinr").textContent = "API error";
    }

    // 2Ô∏è‚É£ Load local JSON for gold, silver, GIB
    const local = await fetch("data.json");
    if (!local.ok) throw new Error("data.json missing");
    const d = await local.json();

    if (d.gold_inr_10g != null) 
      document.getElementById("gold").textContent = "‚Çπ " + d.gold_inr_10g.toLocaleString();
    if (d.silver_inr_kg != null) 
      document.getElementById("silver").textContent = "‚Çπ " + d.silver_inr_kg.toLocaleString();
    if (d.gib_usd != null) 
      document.getElementById("gib").textContent = "$ " + d.gib_usd.toFixed(2);

  } catch(e) {
    console.error(e);
    document.body.insertAdjacentHTML(
      "beforeend",
      "<p style='color:red'>Error loading data (check data.json or API)</p>"
    );
  }
}

// Load data immediately
loadData();
</script>

</body>
</html>
