<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Market Rates (GitHub-only)</title>
<style>
 body{font-family:sans-serif;text-align:center;background:#f9fafb;padding:40px;}
 .box{background:#fff;padding:20px;margin:15px auto;width:320px;
      border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
 .label{font-weight:bold;} .value{color:#007bff;font-size:1.3em;margin-top:6px;}
 footer{margin-top:25px;color:gray;font-size:0.8em;}
</style>
</head>
<body>
<h1>üìä Market Rates</h1>

<div class="box"><div class="label">üí∂ 1 Euro =</div><div id="eurinr" class="value">‚Ä¶</div></div>
<div class="box"><div class="label">ü™ô Gold (10 g INR)</div><div id="gold" class="value">‚Ä¶</div></div>
<div class="box"><div class="label">ü•à Silver (1 kg INR)</div><div id="silver" class="value">‚Ä¶</div></div>
<div class="box"><div class="label">üìà CGI (GIB USD)</div><div id="gib" class="value">‚Ä¶</div></div>

<footer>Euro auto-updates ¬∑ others from data.json</footer>
<script>
async function loadData() {
  try {
    console.log("üîç Fetching Euro‚ÜíINR...");
    const fx = await fetch("https://open.er-api.com/v6/latest/EUR?nocache=" + Date.now());
    console.log("FX status:", fx.status);
    const text = await fx.text();
    console.log("FX raw:", text.slice(0, 400));
    const fxData = JSON.parse(text);
    console.log("FX parsed:", fxData);

    if (!fxData.rates || !fxData.rates.INR) {
      throw new Error("INR rate missing from API");
    }

    const eurInr = fxData.rates.INR;
    document.getElementById("eurinr").textContent = eurInr.toFixed(2) + " ‚Çπ";

    console.log("üì¶ Fetching data.json...");
    const local = await fetch("./data.json?nocache=" + Date.now());
    console.log("Local status:", local.status);
    const localText = await local.text();
    console.log("Local raw:", localText);
    const d = JSON.parse(localText);
    console.log("Local parsed:", d);

    document.getElementById("gold").textContent   = "‚Çπ " + d.gold_inr_10g.toLocaleString();
    document.getElementById("silver").textContent = "‚Çπ " + d.silver_inr_kg.toLocaleString();
    document.getElementById("gib").textContent    = "$ " + d.gib_usd.toFixed(2);
  }
  catch (err) {
    console.error("‚ùå Load error:", err);
    document.body.insertAdjacentHTML(
      "beforeend",
      "<p style='color:red'>Error loading data (check data.json or API)</p>"
    );
  }
}
loadData();
</script>


</body>
</html>
