<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Market Rates (GitHub-only)</title>
<style>
 body { font-family: sans-serif; text-align: center; background: #f9fafb; padding: 40px; }
 .box { background: #fff; padding: 20px; margin: 15px auto; width: 320px;
       border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
 .label { font-weight: bold; } 
 .value { color: #007bff; font-size: 1.3em; margin-top: 6px; }
 footer { margin-top: 25px; color: gray; font-size: 0.8em; }
</style>
</head>
<body>
<h1>üìä Market Rates</h1>

<div class="box"><div class="label">üí∂ 1 Euro =</div><div id="eurinr" class="value">‚Ä¶</div></div>
<div class="box"><div class="label">ü™ô Gold (10 g INR)</div><div id="gold" class="value">‚Ä¶</div></div>
<div class="box"><div class="label">ü•à Silver (1 kg INR)</div><div id="silver" class="value">‚Ä¶</div></div>
<div class="box"><div class="label">üìà GIB (USD)</div><div id="gib" class="value">‚Ä¶</div></div>

<footer>Euro auto-updates ¬∑ others from data.json</footer>

<script>
async function loadData() {
  // Fallback values in case fetch fails
  let eurInr = "‚Äî";
  let gold = "‚Äî";
  let silver = "‚Äî";
  let gib = "‚Äî";

  try {
    // 1Ô∏è‚É£ Load Euro ‚Üí INR rate from free API
    try {
      const fx = await fetch("https://api.exchangerate.host/latest?base=EUR&symbols=INR");
      const fxData = await fx.json();
      if (fxData && fxData.rates && fxData.rates.INR) {
        eurInr = fxData.rates.INR.toFixed(2) + " ‚Çπ";
      }
    } catch(e) {
      console.warn("Euro API failed:", e);
    }

    // 2Ô∏è‚É£ Load local data.json
    try {
      const local = await fetch("data.json"); // must be same folder
      if (local.ok) {
        const d = await local.json();
        gold   = "‚Çπ " + (d.gold_inr_10g ?? 0).toLocaleString();
        silver = "‚Çπ " + (d.silver_inr_kg ?? 0).toLocaleString();
        gib    = "$ " + (d.gib_usd ?? 0).toFixed(2);
      } else {
        console.warn("data.json fetch failed:", local.status);
      }
    } catch(e) {
      console.warn("data.json parsing failed:", e);
    }

  } catch(e) {
    console.error("Unexpected error:", e);
  }

  // Update the DOM
  document.getElementById("eurinr").textContent = eurInr;
  document.getElementById("gold").textContent   = gold;
  document.getElementById("silver").textContent = silver;
  document.getElementById("gib").textContent    = gib;

  // Show error if both failed
  if (eurInr === "‚Äî" && gold === "‚Äî") {
    document.body.insertAdjacentHTML(
      "beforeend",
      "<p style='color:red'>Error loading data (check data.json or API)</p>"
    );
  }
}

loadData();
</script>

</body>
</html>
